{"version":3,"sources":["../node_modules/react-use/esm/useClickAway.js","components/StateDropdown.js","components/StateHeader.js"],"names":["defaultEvents","useClickAway","ref","onClickAway","events","savedCallback","useRef","useEffect","current","handler","event","el","contains","target","_i","events_1","length","eventName","on","document","events_2","off","StateDropdown","stateCode","trail","useState","showDropdown","setShowDropdown","dropdownRef","history","useHistory","t","useTranslation","transitions","useTransition","from","opacity","transform","zIndex","enter","leave","config","mass","tension","friction","handleClick","useCallback","stateCodeItr","push","className","h1","classnames","expanded","style","onClick","bind","STATE_NAMES","item","div","Object","keys","MAP_META","filter","sort","code1","code2","localeCompare","map","StateHeader","data","useMemo","styles","element","index","animationDelay","spring","useSpring","total","getStatistic","SPRING_CONFIG_NUMBERS","hyperlink","meta","formatDate","last_updated","h2","to","formatNumber","tested","date","source","href","memo"],"mappings":"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","file":"static/js/9.790e1f6e.chunk.js","sourcesContent":["import { useEffect, useRef } from 'react';\nimport { off, on } from './misc/util';\nvar defaultEvents = ['mousedown', 'touchstart'];\nvar useClickAway = function (ref, onClickAway, events) {\n    if (events === void 0) { events = defaultEvents; }\n    var savedCallback = useRef(onClickAway);\n    useEffect(function () {\n        savedCallback.current = onClickAway;\n    }, [onClickAway]);\n    useEffect(function () {\n        var handler = function (event) {\n            var el = ref.current;\n            el && !el.contains(event.target) && savedCallback.current(event);\n        };\n        for (var _i = 0, events_1 = events; _i < events_1.length; _i++) {\n            var eventName = events_1[_i];\n            on(document, eventName, handler);\n        }\n        return function () {\n            for (var _i = 0, events_2 = events; _i < events_2.length; _i++) {\n                var eventName = events_2[_i];\n                off(document, eventName, handler);\n            }\n        };\n    }, [events, ref]);\n};\nexport default useClickAway;\n","import {MAP_META, STATE_NAMES} from '../constants';\r\n\r\nimport classnames from 'classnames';\r\nimport {useState, useCallback, useRef} from 'react';\r\nimport {useTranslation} from 'react-i18next';\r\nimport {useHistory} from 'react-router-dom';\r\nimport {useTransition, animated} from 'react-spring';\r\nimport {useClickAway} from 'react-use';\r\n\r\nconst StateDropdown = ({stateCode, trail}) => {\r\n  const [showDropdown, setShowDropdown] = useState(false);\r\n  const dropdownRef = useRef();\r\n  const history = useHistory();\r\n  const {t} = useTranslation();\r\n\r\n  useClickAway(dropdownRef, () => {\r\n    setShowDropdown(false);\r\n  });\r\n\r\n  const transitions = useTransition(showDropdown, {\r\n    from: {\r\n      opacity: 0,\r\n      transform: 'translate3d(0, 2px, 0)',\r\n      zIndex: 999,\r\n    },\r\n    enter: {\r\n      opacity: 1,\r\n      transform: 'translate3d(0, 0px, 0)',\r\n      zIndex: 999,\r\n    },\r\n    leave: {\r\n      opacity: 0,\r\n      transform: 'translate3d(0, 2px, 0)',\r\n      zIndex: 999,\r\n    },\r\n    config: {\r\n      mass: 1,\r\n      tension: 210,\r\n      friction: 20,\r\n    },\r\n  });\r\n\r\n  const handleClick = useCallback(\r\n    (stateCodeItr) => {\r\n      setShowDropdown(false);\r\n      history.push(`/state/${stateCodeItr}`);\r\n    },\r\n    [history]\r\n  );\r\n\r\n  return (\r\n    <div className=\"StateDropdown\" ref={dropdownRef}>\r\n      <animated.h1\r\n        className={classnames('state-name', 'fadeInUp', {\r\n          expanded: showDropdown,\r\n        })}\r\n        style={trail}\r\n        onClick={setShowDropdown.bind(this, !showDropdown)}\r\n      >\r\n        {t(STATE_NAMES[stateCode])}\r\n      </animated.h1>\r\n\r\n      {transitions(\r\n        (style, item) =>\r\n          item && (\r\n            <animated.div className=\"dropdown\" {...{style}}>\r\n              {Object.keys(MAP_META)\r\n                .filter(\r\n                  (stateCodeItr) =>\r\n                    stateCodeItr !== 'TT' && stateCodeItr !== stateCode\r\n                )\r\n                .sort((code1, code2) =>\r\n                  STATE_NAMES[code1].localeCompare(STATE_NAMES[code2])\r\n                )\r\n                .map((stateCodeItr) => (\r\n                  <h1\r\n                    key={stateCodeItr}\r\n                    className=\"item\"\r\n                    onClick={handleClick.bind(this, stateCodeItr)}\r\n                  >\r\n                    {t(STATE_NAMES[stateCodeItr])}\r\n                  </h1>\r\n                ))}\r\n            </animated.div>\r\n          )\r\n      )}\r\n\r\n      {showDropdown && <div className=\"backdrop\"></div>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StateDropdown;\r\n","import StateDropdown from './StateDropdown';\r\n\r\nimport {SPRING_CONFIG_NUMBERS} from '../constants.js';\r\nimport {formatDate, formatNumber, getStatistic} from '../utils/commonFunctions';\r\n\r\nimport {memo, useMemo} from 'react';\r\nimport {useTranslation} from 'react-i18next';\r\nimport {animated, useSpring} from 'react-spring';\r\n\r\nfunction StateHeader({data, stateCode}) {\r\n  const {t} = useTranslation();\r\n\r\n  const trail = useMemo(() => {\r\n    const styles = [];\r\n\r\n    [0, 0, 0].map((element, index) => {\r\n      styles.push({\r\n        animationDelay: `${index * 250}ms`,\r\n      });\r\n      return null;\r\n    });\r\n\r\n    return styles;\r\n  }, []);\r\n\r\n  const spring = useSpring({\r\n    total: getStatistic(data, 'total', 'tested'),\r\n    config: SPRING_CONFIG_NUMBERS,\r\n  });\r\n\r\n  return (\r\n    <div className=\"StateHeader\">\r\n      <div className=\"header-left\">\r\n        <StateDropdown {...{stateCode}} hyperlink={false} trail={trail[0]} />\r\n        {data?.meta?.['last_updated'] && (\r\n          <h5 className=\"fadeInUp\" style={trail[1]}>\r\n            {`${t('Last Updated on')} ${formatDate(\r\n              data.meta.last_updated,\r\n              'dd MMM, p'\r\n            )} ${t('IST')}`}\r\n          </h5>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"header-right fadeInUp\" style={trail[2]}>\r\n        <h5>{t('Tested')}</h5>\r\n        <animated.h2>\r\n          {spring.total.to((total) => formatNumber(total, 'long'))}\r\n        </animated.h2>\r\n        {data?.meta?.tested?.date && (\r\n          <h5 className=\"timestamp\">\r\n            {`${t('As of')} ${formatDate(data.meta.tested.date, 'dd MMMM')}`}\r\n          </h5>\r\n        )}\r\n        {data?.meta?.tested?.source && (\r\n          <h5>\r\n            {`${t('per')} `}\r\n            <a href={data.meta.tested.source} target=\"_noblank\">\r\n              {t('source')}\r\n            </a>\r\n          </h5>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default memo(StateHeader);\r\n"],"sourceRoot":""}