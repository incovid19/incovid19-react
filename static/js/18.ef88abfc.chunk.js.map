{"version":3,"sources":["../node_modules/react-use/esm/useIsomorphicLayoutEffect.js","../node_modules/react-use/esm/useMeasure.js","../node_modules/d3-selection/src/sourceEvent.js","../node_modules/d3-axis/src/identity.js","../node_modules/d3-axis/src/axis.js","../node_modules/d3-scale/src/log.js","../node_modules/d3-selection/src/pointer.js","../node_modules/d3-array/src/extent.js","../node_modules/d3-shape/src/area.js","../node_modules/d3-shape/src/curve/step.js","components/Timeseries.js"],"names":["useIsomorphicLayoutEffect","isBrowser","useLayoutEffect","useEffect","defaultState","x","y","width","height","top","left","bottom","right","window","ResizeObserver","_a","useState","element","ref","_b","rect","setRect","observer","useMemo","entries","contentRect","top_1","observe","disconnect","noop","event","sourceEvent","epsilon","translateX","translateY","number","scale","d","center","offset","Math","max","bandwidth","round","entering","this","__axis","axis","orient","tickArguments","tickValues","tickFormat","tickSizeInner","tickSizeOuter","tickPadding","devicePixelRatio","k","transform","context","values","ticks","apply","domain","format","identity","spacing","range","range0","range1","length","position","copy","selection","path","selectAll","data","tick","order","tickExit","exit","tickEnter","enter","append","attr","line","select","text","merge","insert","transition","isFinite","getAttribute","p","parentNode","remove","filter","each","_","arguments","Array","from","slice","tickSize","axisRight","axisBottom","transformLog","log","transformExp","exp","transformLogn","transformExpn","pow10","reflect","f","loggish","logs","pows","base","rescale","E","log10","log2","logp","pow","powp","count","u","v","r","t","i","j","n","z","floor","ceil","push","min","map","reverse","specifier","formatSpecifier","precision","trim","Infinity","nice","transformer","initRange","node","undefined","currentTarget","svg","ownerSVGElement","createSVGPoint","point","clientX","clientY","matrixTransform","getScreenCTM","inverse","getBoundingClientRect","clientLeft","clientTop","pageX","pageY","extent","valueof","value","index","x0","y0","y1","x1","defined","constant","curve","curveLinear","output","area","buffer","array","defined0","x0z","y0z","areaStart","lineStart","lineEnd","areaEnd","arealine","pointX","pointY","lineX0","lineY0","lineY1","lineX1","Step","_context","_t","prototype","_line","NaN","_x","_y","_point","lineTo","closePath","moveTo","margin","yScaleShrinkFactor","Timeseries","statistics","timeseries","dates","endDate","chartType","isUniform","isLog","isMovingAverage","noRegionHighlightedDistrictData","console","useTranslation","refs","useRef","useMeasure","wrapperRef","highlightedDate","setHighlightedDate","getTimeseriesStatistic","useCallback","date","statistic","movingAverage","getStatistic","condenseChart","T","days","differenceInDays","parseIndiaDate","chartRight","xScale","scaleTime","clamp","yScales","chartBottom","addScaleBuffer","reduce","res","PRIMARY_STATISTICS","uniformScaleMin","uniformScaleMax","yScaleUniformLinear","scaleLinear","yScaleUniformLog","scaleLog","includes","scaleMin","scaleMax","STATISTIC_CONFIGS","isDiscrete","xAxis","g","call","numTicksX","xAxis2","yScale","style","yAxis","num","formatNumber","forEach","current","duration","D3_TRANSITION_DURATION","statisticConfig","isNonLinear","nonLinear","join","color","areaPath","allZero","curveStep","update","attrTween","previous","interpolatePath","linePath","curveMonotoneX","on","mousemove","touches","mouseout","xm","pointer","invert","isNaN","bisectDate","bisector","dateLeft","dateRight","getTimeseriesStatisticDelta","currCount","hideZero","prevDate","findIndex","trail","animationDelay","className","total","delta","classnames","capitalize","displayName","formatDate","hasPrimary","preserveAspectRatio","isEqual","prevProps","currProps","equal","regionHighlighted","stateCode","districtName","memo"],"mappings":"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","file":"static/js/18.ef88abfc.chunk.js","sourcesContent":["import { useEffect, useLayoutEffect } from 'react';\nimport { isBrowser } from './misc/util';\nvar useIsomorphicLayoutEffect = isBrowser ? useLayoutEffect : useEffect;\nexport default useIsomorphicLayoutEffect;\n","import { useMemo, useState } from 'react';\nimport useIsomorphicLayoutEffect from './useIsomorphicLayoutEffect';\nimport { isBrowser, noop } from './misc/util';\nvar defaultState = {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0,\n    top: 0,\n    left: 0,\n    bottom: 0,\n    right: 0,\n};\nfunction useMeasure() {\n    var _a = useState(null), element = _a[0], ref = _a[1];\n    var _b = useState(defaultState), rect = _b[0], setRect = _b[1];\n    var observer = useMemo(function () {\n        return new window.ResizeObserver(function (entries) {\n            if (entries[0]) {\n                var _a = entries[0].contentRect, x = _a.x, y = _a.y, width = _a.width, height = _a.height, top_1 = _a.top, left = _a.left, bottom = _a.bottom, right = _a.right;\n                setRect({ x: x, y: y, width: width, height: height, top: top_1, left: left, bottom: bottom, right: right });\n            }\n        });\n    }, []);\n    useIsomorphicLayoutEffect(function () {\n        if (!element)\n            return;\n        observer.observe(element);\n        return function () {\n            observer.disconnect();\n        };\n    }, [element]);\n    return [ref, rect];\n}\nexport default isBrowser && typeof window.ResizeObserver !== 'undefined'\n    ? useMeasure\n    : (function () { return [noop, defaultState]; });\n","export default function(event) {\n  let sourceEvent;\n  while (sourceEvent = event.sourceEvent) event = sourceEvent;\n  return event;\n}\n","export default function(x) {\n  return x;\n}\n","import identity from \"./identity.js\";\n\nvar top = 1,\n    right = 2,\n    bottom = 3,\n    left = 4,\n    epsilon = 1e-6;\n\nfunction translateX(x) {\n  return \"translate(\" + x + \",0)\";\n}\n\nfunction translateY(y) {\n  return \"translate(0,\" + y + \")\";\n}\n\nfunction number(scale) {\n  return d => +scale(d);\n}\n\nfunction center(scale, offset) {\n  offset = Math.max(0, scale.bandwidth() - offset * 2) / 2;\n  if (scale.round()) offset = Math.round(offset);\n  return d => +scale(d) + offset;\n}\n\nfunction entering() {\n  return !this.__axis;\n}\n\nfunction axis(orient, scale) {\n  var tickArguments = [],\n      tickValues = null,\n      tickFormat = null,\n      tickSizeInner = 6,\n      tickSizeOuter = 6,\n      tickPadding = 3,\n      offset = typeof window !== \"undefined\" && window.devicePixelRatio > 1 ? 0 : 0.5,\n      k = orient === top || orient === left ? -1 : 1,\n      x = orient === left || orient === right ? \"x\" : \"y\",\n      transform = orient === top || orient === bottom ? translateX : translateY;\n\n  function axis(context) {\n    var values = tickValues == null ? (scale.ticks ? scale.ticks.apply(scale, tickArguments) : scale.domain()) : tickValues,\n        format = tickFormat == null ? (scale.tickFormat ? scale.tickFormat.apply(scale, tickArguments) : identity) : tickFormat,\n        spacing = Math.max(tickSizeInner, 0) + tickPadding,\n        range = scale.range(),\n        range0 = +range[0] + offset,\n        range1 = +range[range.length - 1] + offset,\n        position = (scale.bandwidth ? center : number)(scale.copy(), offset),\n        selection = context.selection ? context.selection() : context,\n        path = selection.selectAll(\".domain\").data([null]),\n        tick = selection.selectAll(\".tick\").data(values, scale).order(),\n        tickExit = tick.exit(),\n        tickEnter = tick.enter().append(\"g\").attr(\"class\", \"tick\"),\n        line = tick.select(\"line\"),\n        text = tick.select(\"text\");\n\n    path = path.merge(path.enter().insert(\"path\", \".tick\")\n        .attr(\"class\", \"domain\")\n        .attr(\"stroke\", \"currentColor\"));\n\n    tick = tick.merge(tickEnter);\n\n    line = line.merge(tickEnter.append(\"line\")\n        .attr(\"stroke\", \"currentColor\")\n        .attr(x + \"2\", k * tickSizeInner));\n\n    text = text.merge(tickEnter.append(\"text\")\n        .attr(\"fill\", \"currentColor\")\n        .attr(x, k * spacing)\n        .attr(\"dy\", orient === top ? \"0em\" : orient === bottom ? \"0.71em\" : \"0.32em\"));\n\n    if (context !== selection) {\n      path = path.transition(context);\n      tick = tick.transition(context);\n      line = line.transition(context);\n      text = text.transition(context);\n\n      tickExit = tickExit.transition(context)\n          .attr(\"opacity\", epsilon)\n          .attr(\"transform\", function(d) { return isFinite(d = position(d)) ? transform(d + offset) : this.getAttribute(\"transform\"); });\n\n      tickEnter\n          .attr(\"opacity\", epsilon)\n          .attr(\"transform\", function(d) { var p = this.parentNode.__axis; return transform((p && isFinite(p = p(d)) ? p : position(d)) + offset); });\n    }\n\n    tickExit.remove();\n\n    path\n        .attr(\"d\", orient === left || orient === right\n            ? (tickSizeOuter ? \"M\" + k * tickSizeOuter + \",\" + range0 + \"H\" + offset + \"V\" + range1 + \"H\" + k * tickSizeOuter : \"M\" + offset + \",\" + range0 + \"V\" + range1)\n            : (tickSizeOuter ? \"M\" + range0 + \",\" + k * tickSizeOuter + \"V\" + offset + \"H\" + range1 + \"V\" + k * tickSizeOuter : \"M\" + range0 + \",\" + offset + \"H\" + range1));\n\n    tick\n        .attr(\"opacity\", 1)\n        .attr(\"transform\", function(d) { return transform(position(d) + offset); });\n\n    line\n        .attr(x + \"2\", k * tickSizeInner);\n\n    text\n        .attr(x, k * spacing)\n        .text(format);\n\n    selection.filter(entering)\n        .attr(\"fill\", \"none\")\n        .attr(\"font-size\", 10)\n        .attr(\"font-family\", \"sans-serif\")\n        .attr(\"text-anchor\", orient === right ? \"start\" : orient === left ? \"end\" : \"middle\");\n\n    selection\n        .each(function() { this.__axis = position; });\n  }\n\n  axis.scale = function(_) {\n    return arguments.length ? (scale = _, axis) : scale;\n  };\n\n  axis.ticks = function() {\n    return tickArguments = Array.from(arguments), axis;\n  };\n\n  axis.tickArguments = function(_) {\n    return arguments.length ? (tickArguments = _ == null ? [] : Array.from(_), axis) : tickArguments.slice();\n  };\n\n  axis.tickValues = function(_) {\n    return arguments.length ? (tickValues = _ == null ? null : Array.from(_), axis) : tickValues && tickValues.slice();\n  };\n\n  axis.tickFormat = function(_) {\n    return arguments.length ? (tickFormat = _, axis) : tickFormat;\n  };\n\n  axis.tickSize = function(_) {\n    return arguments.length ? (tickSizeInner = tickSizeOuter = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeInner = function(_) {\n    return arguments.length ? (tickSizeInner = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeOuter = function(_) {\n    return arguments.length ? (tickSizeOuter = +_, axis) : tickSizeOuter;\n  };\n\n  axis.tickPadding = function(_) {\n    return arguments.length ? (tickPadding = +_, axis) : tickPadding;\n  };\n\n  axis.offset = function(_) {\n    return arguments.length ? (offset = +_, axis) : offset;\n  };\n\n  return axis;\n}\n\nexport function axisTop(scale) {\n  return axis(top, scale);\n}\n\nexport function axisRight(scale) {\n  return axis(right, scale);\n}\n\nexport function axisBottom(scale) {\n  return axis(bottom, scale);\n}\n\nexport function axisLeft(scale) {\n  return axis(left, scale);\n}\n","import {ticks} from \"d3-array\";\nimport {format, formatSpecifier} from \"d3-format\";\nimport nice from \"./nice.js\";\nimport {copy, transformer} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\n\nfunction transformLog(x) {\n  return Math.log(x);\n}\n\nfunction transformExp(x) {\n  return Math.exp(x);\n}\n\nfunction transformLogn(x) {\n  return -Math.log(-x);\n}\n\nfunction transformExpn(x) {\n  return -Math.exp(-x);\n}\n\nfunction pow10(x) {\n  return isFinite(x) ? +(\"1e\" + x) : x < 0 ? 0 : x;\n}\n\nfunction powp(base) {\n  return base === 10 ? pow10\n      : base === Math.E ? Math.exp\n      : x => Math.pow(base, x);\n}\n\nfunction logp(base) {\n  return base === Math.E ? Math.log\n      : base === 10 && Math.log10\n      || base === 2 && Math.log2\n      || (base = Math.log(base), x => Math.log(x) / base);\n}\n\nfunction reflect(f) {\n  return (x, k) => -f(-x, k);\n}\n\nexport function loggish(transform) {\n  const scale = transform(transformLog, transformExp);\n  const domain = scale.domain;\n  let base = 10;\n  let logs;\n  let pows;\n\n  function rescale() {\n    logs = logp(base), pows = powp(base);\n    if (domain()[0] < 0) {\n      logs = reflect(logs), pows = reflect(pows);\n      transform(transformLogn, transformExpn);\n    } else {\n      transform(transformLog, transformExp);\n    }\n    return scale;\n  }\n\n  scale.base = function(_) {\n    return arguments.length ? (base = +_, rescale()) : base;\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.ticks = count => {\n    const d = domain();\n    let u = d[0];\n    let v = d[d.length - 1];\n    const r = v < u;\n\n    if (r) ([u, v] = [v, u]);\n\n    let i = logs(u);\n    let j = logs(v);\n    let k;\n    let t;\n    const n = count == null ? 10 : +count;\n    let z = [];\n\n    if (!(base % 1) && j - i < n) {\n      i = Math.floor(i), j = Math.ceil(j);\n      if (u > 0) for (; i <= j; ++i) {\n        for (k = 1; k < base; ++k) {\n          t = i < 0 ? k / pows(-i) : k * pows(i);\n          if (t < u) continue;\n          if (t > v) break;\n          z.push(t);\n        }\n      } else for (; i <= j; ++i) {\n        for (k = base - 1; k >= 1; --k) {\n          t = i > 0 ? k / pows(-i) : k * pows(i);\n          if (t < u) continue;\n          if (t > v) break;\n          z.push(t);\n        }\n      }\n      if (z.length * 2 < n) z = ticks(u, v, n);\n    } else {\n      z = ticks(i, j, Math.min(j - i, n)).map(pows);\n    }\n    return r ? z.reverse() : z;\n  };\n\n  scale.tickFormat = (count, specifier) => {\n    if (count == null) count = 10;\n    if (specifier == null) specifier = base === 10 ? \"s\" : \",\";\n    if (typeof specifier !== \"function\") {\n      if (!(base % 1) && (specifier = formatSpecifier(specifier)).precision == null) specifier.trim = true;\n      specifier = format(specifier);\n    }\n    if (count === Infinity) return specifier;\n    const k = Math.max(1, base * count / scale.ticks().length); // TODO fast estimate?\n    return d => {\n      let i = d / pows(Math.round(logs(d)));\n      if (i * base < base - 0.5) i *= base;\n      return i <= k ? specifier(d) : \"\";\n    };\n  };\n\n  scale.nice = () => {\n    return domain(nice(domain(), {\n      floor: x => pows(Math.floor(logs(x))),\n      ceil: x => pows(Math.ceil(logs(x)))\n    }));\n  };\n\n  return scale;\n}\n\nexport default function log() {\n  const scale = loggish(transformer()).domain([1, 10]);\n  scale.copy = () => copy(scale, log()).base(scale.base());\n  initRange.apply(scale, arguments);\n  return scale;\n}\n","import sourceEvent from \"./sourceEvent.js\";\n\nexport default function(event, node) {\n  event = sourceEvent(event);\n  if (node === undefined) node = event.currentTarget;\n  if (node) {\n    var svg = node.ownerSVGElement || node;\n    if (svg.createSVGPoint) {\n      var point = svg.createSVGPoint();\n      point.x = event.clientX, point.y = event.clientY;\n      point = point.matrixTransform(node.getScreenCTM().inverse());\n      return [point.x, point.y];\n    }\n    if (node.getBoundingClientRect) {\n      var rect = node.getBoundingClientRect();\n      return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];\n    }\n  }\n  return [event.pageX, event.pageY];\n}\n","export default function extent(values, valueof) {\n  let min;\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null) {\n        if (min === undefined) {\n          if (value >= value) min = max = value;\n        } else {\n          if (min > value) min = value;\n          if (max < value) max = value;\n        }\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null) {\n        if (min === undefined) {\n          if (value >= value) min = max = value;\n        } else {\n          if (min > value) min = value;\n          if (max < value) max = value;\n        }\n      }\n    }\n  }\n  return [min, max];\n}\n","import {path} from \"d3-path\";\nimport array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport line from \"./line.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function(x0, y0, y1) {\n  var x1 = null,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  x0 = typeof x0 === \"function\" ? x0 : (x0 === undefined) ? pointX : constant(+x0);\n  y0 = typeof y0 === \"function\" ? y0 : (y0 === undefined) ? constant(0) : constant(+y0);\n  y1 = typeof y1 === \"function\" ? y1 : (y1 === undefined) ? pointY : constant(+y1);\n\n  function area(data) {\n    var i,\n        j,\n        k,\n        n = (data = array(data)).length,\n        d,\n        defined0 = false,\n        buffer,\n        x0z = new Array(n),\n        y0z = new Array(n);\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) {\n          j = i;\n          output.areaStart();\n          output.lineStart();\n        } else {\n          output.lineEnd();\n          output.lineStart();\n          for (k = i - 1; k >= j; --k) {\n            output.point(x0z[k], y0z[k]);\n          }\n          output.lineEnd();\n          output.areaEnd();\n        }\n      }\n      if (defined0) {\n        x0z[i] = +x0(d, i, data), y0z[i] = +y0(d, i, data);\n        output.point(x1 ? +x1(d, i, data) : x0z[i], y1 ? +y1(d, i, data) : y0z[i]);\n      }\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  function arealine() {\n    return line().defined(defined).curve(curve).context(context);\n  }\n\n  area.x = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), x1 = null, area) : x0;\n  };\n\n  area.x0 = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), area) : x0;\n  };\n\n  area.x1 = function(_) {\n    return arguments.length ? (x1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : x1;\n  };\n\n  area.y = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), y1 = null, area) : y0;\n  };\n\n  area.y0 = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), area) : y0;\n  };\n\n  area.y1 = function(_) {\n    return arguments.length ? (y1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : y1;\n  };\n\n  area.lineX0 =\n  area.lineY0 = function() {\n    return arealine().x(x0).y(y0);\n  };\n\n  area.lineY1 = function() {\n    return arealine().x(x0).y(y1);\n  };\n\n  area.lineX1 = function() {\n    return arealine().x(x1).y(y0);\n  };\n\n  area.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), area) : defined;\n  };\n\n  area.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), area) : curve;\n  };\n\n  area.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), area) : context;\n  };\n\n  return area;\n}\n","function Step(context, t) {\n  this._context = context;\n  this._t = t;\n}\n\nStep.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = this._y = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (0 < this._t && this._t < 1 && this._point === 2) this._context.lineTo(this._x, this._y);\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    if (this._line >= 0) this._t = 1 - this._t, this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // falls through\n      default: {\n        if (this._t <= 0) {\n          this._context.lineTo(this._x, y);\n          this._context.lineTo(x, y);\n        } else {\n          var x1 = this._x * (1 - this._t) + x * this._t;\n          this._context.lineTo(x1, this._y);\n          this._context.lineTo(x1, y);\n        }\n        break;\n      }\n    }\n    this._x = x, this._y = y;\n  }\n};\n\nexport default function(context) {\n  return new Step(context, 0.5);\n}\n\nexport function stepBefore(context) {\n  return new Step(context, 0);\n}\n\nexport function stepAfter(context) {\n  return new Step(context, 1);\n}\n","import {\r\n  D3_TRANSITION_DURATION,\r\n  PRIMARY_STATISTICS,\r\n  STATISTIC_CONFIGS,\r\n} from '../constants';\r\nimport {\r\n  capitalize,\r\n  formatNumber,\r\n  formatDate,\r\n  getStatistic,\r\n  parseIndiaDate,\r\n} from '../utils/commonFunctions';\r\n\r\nimport classnames from 'classnames';\r\nimport {bisector, extent} from 'd3-array';\r\nimport {axisBottom, axisRight} from 'd3-axis';\r\nimport {interpolatePath} from 'd3-interpolate-path';\r\nimport {scaleTime, scaleLinear, scaleLog} from 'd3-scale';\r\nimport {select, pointer} from 'd3-selection';\r\nimport {area, line, curveLinear, curveMonotoneX, curveStep} from 'd3-shape';\r\nimport 'd3-transition';\r\nimport {differenceInDays} from 'date-fns';\r\nimport equal from 'fast-deep-equal';\r\nimport {memo, useCallback, useEffect, useRef, useMemo, useState} from 'react';\r\nimport {useTranslation} from 'react-i18next';\r\nimport {useMeasure} from 'react-use';\r\n\r\n// Chart margins\r\nconst margin = {top: 15, right: 35, bottom: 25, left: 25};\r\n// Buffer space along y-axis\r\nconst yScaleShrinkFactor = 0.7;\r\nconst numTicksX = (width) => (width < 480 ? 4 : 6);\r\n\r\nfunction Timeseries({\r\n  statistics,\r\n  timeseries,\r\n  dates,\r\n  endDate,\r\n  chartType,\r\n  isUniform,\r\n  isLog,\r\n  isMovingAverage,\r\n  noRegionHighlightedDistrictData,\r\n}) {\r\n  console.log(statistics);\r\n  console.log(isMovingAverage);\r\n  console.log(timeseries);\r\n  const {t} = useTranslation();\r\n  const refs = useRef([]);\r\n  const [wrapperRef, {width, height}] = useMeasure();\r\n\r\n  const [highlightedDate, setHighlightedDate] = useState(\r\n    dates[dates.length - 1]\r\n  );\r\n  useEffect(() => {\r\n    setHighlightedDate(dates[dates.length - 1]);\r\n  }, [dates]);\r\n\r\n  const getTimeseriesStatistic = useCallback(\r\n    (date, statistic, movingAverage = isMovingAverage) => {\r\n      return getStatistic(timeseries?.[date], chartType, statistic, {\r\n        movingAverage,\r\n      });\r\n    },\r\n    [chartType, isMovingAverage, timeseries]\r\n  );\r\n\r\n  const condenseChart = useMemo(() => {\r\n    const T = dates.length;\r\n    const days = differenceInDays(\r\n      parseIndiaDate(dates[T - 1]),\r\n      parseIndiaDate(dates[0])\r\n    );\r\n    // Chart extremes\r\n    const chartRight = width - margin.right;\r\n    // Bar widths\r\n    const axisWidth = Math.max(0, chartRight - margin.left) / (1.25 * days);\r\n    return axisWidth < 4;\r\n  }, [width, dates]);\r\n\r\n  const xScale = useMemo(() => {\r\n    const T = dates.length;\r\n    const chartRight = width - margin.right;\r\n\r\n    return scaleTime()\r\n      .clamp(true)\r\n      .domain([\r\n        parseIndiaDate(dates[0] || endDate),\r\n        parseIndiaDate(dates[T - 1] || endDate),\r\n      ])\r\n      .range([margin.left, chartRight]);\r\n  }, [width, endDate, dates]);\r\n\r\n  const yScales = useMemo(() => {\r\n    const chartBottom = height - margin.bottom;\r\n\r\n    const addScaleBuffer = (scale, log = false) => {\r\n      const domain = scale.domain();\r\n      if (log) {\r\n        scale.domain([\r\n          domain[0],\r\n          domain[0] * Math.pow(domain[1] / domain[0], 1 / yScaleShrinkFactor),\r\n        ]);\r\n      } else {\r\n        scale.domain([\r\n          domain[0],\r\n          domain[0] + (domain[1] - domain[0]) / yScaleShrinkFactor,\r\n        ]);\r\n      }\r\n      return scale;\r\n    };\r\n\r\n    const [uniformScaleMin, uniformScaleMax] = extent(\r\n      dates.reduce((res, date) => {\r\n        res.push(\r\n          ...PRIMARY_STATISTICS.map((statistic) =>\r\n            getTimeseriesStatistic(date, statistic)\r\n          )\r\n        );\r\n        return res;\r\n      }, [])\r\n    );\r\n\r\n    const yScaleUniformLinear = addScaleBuffer(\r\n      scaleLinear()\r\n        .clamp(true)\r\n        .domain([Math.min(0, uniformScaleMin), Math.max(1, uniformScaleMax)])\r\n        .range([chartBottom, margin.top])\r\n        .nice(4)\r\n    );\r\n\r\n    const yScaleUniformLog = addScaleBuffer(\r\n      scaleLog()\r\n        .clamp(true)\r\n        .domain([1, Math.max(10, uniformScaleMax)])\r\n        .range([chartBottom, margin.top])\r\n        .nice(4),\r\n      true\r\n    );\r\n\r\n    return statistics.map((statistic) => {\r\n      if (isUniform) {\r\n        if (\r\n          chartType === 'total' &&\r\n          isLog &&\r\n          PRIMARY_STATISTICS.includes(statistic)\r\n        ) {\r\n          return yScaleUniformLog;\r\n        } else if (PRIMARY_STATISTICS.includes(statistic)) {\r\n          return yScaleUniformLinear;\r\n        }\r\n      }\r\n\r\n      const [scaleMin, scaleMax] = extent(dates, (date) =>\r\n        getTimeseriesStatistic(date, statistic)\r\n      );\r\n\r\n      if (chartType === 'total' && isLog) {\r\n        return addScaleBuffer(\r\n          scaleLog()\r\n            .clamp(true)\r\n            .domain([1, Math.max(10, scaleMax)])\r\n            .range([chartBottom, margin.top])\r\n            .nice(4),\r\n          true\r\n        );\r\n      } else {\r\n        return addScaleBuffer(\r\n          scaleLinear()\r\n            .clamp(true)\r\n            .domain([\r\n              Math.min(0, scaleMin),\r\n              STATISTIC_CONFIGS[statistic].format === '%'\r\n                ? Math.min(100, Math.max(1, scaleMax))\r\n                : Math.max(1, scaleMax),\r\n            ])\r\n            .range([chartBottom, margin.top])\r\n            .nice(4)\r\n        );\r\n      }\r\n    });\r\n  }, [\r\n    height,\r\n    chartType,\r\n    isUniform,\r\n    isLog,\r\n    statistics,\r\n    dates,\r\n    getTimeseriesStatistic,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (!width || !height) return;\r\n\r\n    const T = dates.length;\r\n    // Chart extremes\r\n    const chartRight = width - margin.right;\r\n    const chartBottom = height - margin.bottom;\r\n\r\n    const isDiscrete = chartType === 'delta' && !isMovingAverage;\r\n\r\n    const xAxis = (g) =>\r\n      g\r\n        .attr('class', 'x-axis')\r\n        .call(axisBottom(xScale).ticks(numTicksX(width)));\r\n\r\n    const xAxis2 = (g, yScale) => {\r\n      g.attr('class', 'x-axis2')\r\n        .call(axisBottom(xScale).tickValues([]).tickSize(0))\r\n        .select('.domain')\r\n        .style('transform', `translate3d(0, ${yScale(0)}px, 0)`);\r\n\r\n      if (yScale(0) !== chartBottom) g.select('.domain').attr('opacity', 0.4);\r\n      else g.select('.domain').attr('opacity', 0);\r\n    };\r\n\r\n    const yAxis = (g, yScale, format) =>\r\n      g.attr('class', 'y-axis').call(\r\n        axisRight(yScale)\r\n          .ticks(4)\r\n          .tickFormat((num) => formatNumber(num, format))\r\n          .tickPadding(4)\r\n      );\r\n\r\n    function mousemove(event) {\r\n      const xm = pointer(event)[0];\r\n      const date = xScale.invert(xm);\r\n      if (!isNaN(date)) {\r\n        const bisectDate = bisector((date) => parseIndiaDate(date)).left;\r\n        const index = bisectDate(dates, date, 1);\r\n        const dateLeft = dates[index - 1];\r\n        const dateRight = dates[index];\r\n        setHighlightedDate(\r\n          date - parseIndiaDate(dateLeft) < parseIndiaDate(dateRight) - date\r\n            ? dateLeft\r\n            : dateRight\r\n        );\r\n      }\r\n    }\r\n\r\n    function mouseout(event) {\r\n      setHighlightedDate(dates[T - 1]);\r\n    }\r\n\r\n    /* Begin drawing charts */\r\n    statistics.forEach((statistic, i) => {\r\n      const ref = refs.current[i];\r\n      const svg = select(ref);\r\n      const t = svg.transition().duration(D3_TRANSITION_DURATION);\r\n\r\n      const yScale = yScales[i];\r\n      const statisticConfig = STATISTIC_CONFIGS[statistic];\r\n      const format =\r\n        STATISTIC_CONFIGS[statistic].format === '%' ? '%' : 'short';\r\n      const isNonLinear = !!STATISTIC_CONFIGS[statistic]?.nonLinear;\r\n\r\n      /* X axis */\r\n      svg\r\n        .select('.x-axis')\r\n        .style('transform', `translate3d(0, ${chartBottom}px, 0)`)\r\n        .transition(t)\r\n        .call(xAxis);\r\n\r\n      svg.select('.x-axis2').transition(t).call(xAxis2, yScale);\r\n\r\n      /* Y axis */\r\n      svg\r\n        .select('.y-axis')\r\n        .style('transform', `translate3d(${chartRight}px, 0, 0)`)\r\n        .transition(t)\r\n        .call(yAxis, yScale, format);\r\n\r\n      /* Path dots */\r\n      svg\r\n        .selectAll('circle.normal')\r\n        .data(condenseChart ? [] : dates, (date) => date)\r\n        .join((enter) =>\r\n          enter\r\n            .append('circle')\r\n            .attr('class', 'normal')\r\n            .attr('fill', statisticConfig?.color)\r\n            .attr('stroke', statisticConfig?.color)\r\n            .attr('cx', (date) => xScale(parseIndiaDate(date)))\r\n            .attr('cy', (date) =>\r\n              yScale(isDiscrete ? 0 : getTimeseriesStatistic(date, statistic))\r\n            )\r\n            .attr('r', 2)\r\n        )\r\n        .transition(t)\r\n        .attr('cx', (date) => xScale(parseIndiaDate(date)))\r\n        .attr('cy', (date) => yScale(getTimeseriesStatistic(date, statistic)));\r\n\r\n      const areaPath = (dates, allZero = false) =>\r\n        area()\r\n          .curve(curveStep)\r\n          .x((date) => xScale(parseIndiaDate(date)))\r\n          .y0(yScale(0))\r\n          .y1(\r\n            allZero\r\n              ? yScale(0)\r\n              : (date) => yScale(getTimeseriesStatistic(date, statistic, false))\r\n          )(dates);\r\n\r\n      svg\r\n        .selectAll('.trend-area')\r\n        .data(\r\n          T && chartType === 'delta' && !isNonLinear && condenseChart\r\n            ? [dates]\r\n            : []\r\n        )\r\n        .join(\r\n          (enter) =>\r\n            enter\r\n              .append('path')\r\n              .attr('class', 'trend-area')\r\n              .call((enter) =>\r\n                enter\r\n                  .attr('d', (dates) => areaPath(dates, true))\r\n                  .transition(t)\r\n                  .attr('d', areaPath)\r\n              ),\r\n          (update) =>\r\n            update.call((update) =>\r\n              update.transition(t).attrTween('d', function (dates) {\r\n                const previous = select(this).attr('d');\r\n                const current = areaPath(dates);\r\n                return interpolatePath(previous, current);\r\n              })\r\n            ),\r\n          (exit) =>\r\n            exit.call((exit) =>\r\n              exit\r\n                .transition(t)\r\n                .attr('d', (dates) => areaPath(dates, true))\r\n                .remove()\r\n            )\r\n        )\r\n        .transition(t)\r\n        .attr('opacity', isMovingAverage ? 0.3 : 1);\r\n\r\n      svg\r\n        .selectAll('.stem')\r\n        .data(\r\n          T && chartType === 'delta' && !isNonLinear && !condenseChart\r\n            ? dates\r\n            : [],\r\n          (date) => date\r\n        )\r\n        .join(\r\n          (enter) =>\r\n            enter\r\n              .append('line')\r\n              .attr('class', 'stem')\r\n              .attr('stroke-width', 4)\r\n              .attr('x1', (date) => xScale(parseIndiaDate(date)))\r\n              .attr('y1', yScale(0))\r\n              .attr('x2', (date) => xScale(parseIndiaDate(date)))\r\n              .attr('y2', yScale(0)),\r\n          (update) => update,\r\n          (exit) =>\r\n            exit.call((exit) =>\r\n              exit\r\n                .transition(t)\r\n                .attr('x1', (date) => xScale(parseIndiaDate(date)))\r\n                .attr('x2', (date) => xScale(parseIndiaDate(date)))\r\n                .attr('y1', yScale(0))\r\n                .attr('y2', yScale(0))\r\n                .remove()\r\n            )\r\n        )\r\n        .transition(t)\r\n        .attr('x1', (date) => xScale(parseIndiaDate(date)))\r\n        .attr('y1', yScale(0))\r\n        .attr('x2', (date) => xScale(parseIndiaDate(date)))\r\n        .attr('y2', (date) =>\r\n          yScale(getTimeseriesStatistic(date, statistic, false))\r\n        )\r\n        .attr('opacity', isMovingAverage ? 0.2 : 1);\r\n\r\n      const linePath = (\r\n        movingAverage = isMovingAverage,\r\n        curve = curveMonotoneX\r\n      ) =>\r\n        line()\r\n          .curve(curve)\r\n          .x((date) => xScale(parseIndiaDate(date)))\r\n          .y((date) =>\r\n            yScale(getTimeseriesStatistic(date, statistic, movingAverage))\r\n          );\r\n\r\n      svg\r\n        .select('.trend')\r\n        .selectAll('path')\r\n        .data(\r\n          T && (chartType === 'total' || isNonLinear || isMovingAverage)\r\n            ? [dates]\r\n            : []\r\n        )\r\n        .join(\r\n          (enter) =>\r\n            enter\r\n              .append('path')\r\n              .attr('class', 'trend')\r\n              .attr('fill', 'none')\r\n              .attr('stroke-width', 4)\r\n              .attr('d', linePath())\r\n              .call((enter) => enter.transition(t).attr('opacity', 1)),\r\n          (update) =>\r\n            update.call((update) =>\r\n              update\r\n                .transition(t)\r\n                .attrTween('d', function (date) {\r\n                  const previous = select(this).attr('d');\r\n                  const current = linePath()(date);\r\n                  return interpolatePath(previous, current);\r\n                })\r\n                .attr('opacity', 1)\r\n            ),\r\n          (exit) =>\r\n            exit.call((exit) => exit.transition(t).attr('opacity', 0).remove())\r\n        )\r\n        .attr('stroke', statisticConfig?.color + (condenseChart ? '99' : '50'));\r\n\r\n      svg\r\n        .select('.trend-background')\r\n        .selectAll('path')\r\n        .data(\r\n          T && chartType === 'delta' && isNonLinear && isMovingAverage\r\n            ? [dates]\r\n            : []\r\n        )\r\n        .join(\r\n          (enter) =>\r\n            enter\r\n              .append('path')\r\n              .attr('class', 'trend-background')\r\n              .attr('fill', 'none')\r\n              .attr('stroke-width', 4)\r\n              .attr('d', linePath(false, curveLinear))\r\n              .call((enter) => enter.transition(t).attr('opacity', 0.2)),\r\n          (update) =>\r\n            update.call((update) =>\r\n              update\r\n                .transition(t)\r\n                .attrTween('d', function (date) {\r\n                  const previous = select(this).attr('d');\r\n                  const current = linePath(false, curveLinear)(date);\r\n                  return interpolatePath(previous, current);\r\n                })\r\n                .attr('opacity', 0.2)\r\n            ),\r\n          (exit) =>\r\n            exit.call((exit) => exit.transition(t).attr('opacity', 0).remove())\r\n        )\r\n        .attr('stroke', statisticConfig?.color + (condenseChart ? '99' : '50'));\r\n\r\n      svg.selectAll('*').attr('pointer-events', 'none');\r\n      svg\r\n        .on('mousemove', mousemove)\r\n        .on('touchmove', (event) => mousemove(event.touches[0]))\r\n        .on('mouseout touchend', mouseout);\r\n    });\r\n  }, [\r\n    width,\r\n    height,\r\n    chartType,\r\n    isMovingAverage,\r\n    condenseChart,\r\n    xScale,\r\n    yScales,\r\n    statistics,\r\n    getTimeseriesStatistic,\r\n    dates,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    statistics.forEach((statistic, i) => {\r\n      const ref = refs.current[i];\r\n      const svg = select(ref);\r\n      const statisticConfig = STATISTIC_CONFIGS[statistic];\r\n      const yScale = yScales[i];\r\n      const t = svg.transition().duration(D3_TRANSITION_DURATION);\r\n\r\n      svg\r\n        .selectAll('circle.condensed')\r\n        .data(\r\n          condenseChart && highlightedDate ? [highlightedDate] : [],\r\n          (date) => date\r\n        )\r\n        .join((enter) =>\r\n          enter\r\n            .append('circle')\r\n            .attr('class', 'condensed')\r\n            .attr('fill', statisticConfig?.color)\r\n            .attr('stroke', statisticConfig?.color)\r\n            .attr('pointer-events', 'none')\r\n            .attr('cx', (date) => xScale(parseIndiaDate(date)))\r\n            .attr('cy', (date) =>\r\n              yScale(getTimeseriesStatistic(date, statistic))\r\n            )\r\n            .attr('r', 4)\r\n        )\r\n        .transition(t)\r\n        .attr('cx', (date) => xScale(parseIndiaDate(date)))\r\n        .attr('cy', (date) => yScale(getTimeseriesStatistic(date, statistic)));\r\n\r\n      if (!condenseChart) {\r\n        svg\r\n          .selectAll('circle')\r\n          .attr('r', (date) => (date === highlightedDate ? 4 : 2));\r\n      }\r\n    });\r\n  }, [\r\n    condenseChart,\r\n    highlightedDate,\r\n    xScale,\r\n    yScales,\r\n    statistics,\r\n    getTimeseriesStatistic,\r\n  ]);\r\n\r\n  const getTimeseriesStatisticDelta = useCallback(\r\n    (statistic) => {\r\n      if (!highlightedDate) return;\r\n\r\n      const currCount = getTimeseriesStatistic(highlightedDate, statistic);\r\n      if (STATISTIC_CONFIGS[statistic]?.hideZero && currCount === 0) return;\r\n\r\n      const prevDate =\r\n        dates[dates.findIndex((date) => date === highlightedDate) - 1];\r\n\r\n      const prevCount = getTimeseriesStatistic(prevDate, statistic);\r\n      return currCount - prevCount;\r\n    },\r\n    [dates, highlightedDate, getTimeseriesStatistic]\r\n  );\r\n\r\n  const trail = useMemo(\r\n    () =>\r\n      statistics.map((statistic, index) => ({\r\n        animationDelay: `${index * 250}ms`,\r\n      })),\r\n    [statistics]\r\n  );\r\n\r\n  return (\r\n    <div className=\"Timeseries\">\r\n      {statistics.map((statistic, index) => {\r\n        const total = getTimeseriesStatistic(highlightedDate, statistic);\r\n        const delta = getTimeseriesStatisticDelta(statistic, index);\r\n        const statisticConfig = STATISTIC_CONFIGS[statistic];\r\n        return (\r\n          <div\r\n            key={statistic}\r\n            className={classnames('svg-parent fadeInUp', `is-${statistic}`)}\r\n            style={trail[index]}\r\n            ref={index === 0 ? wrapperRef : null}\r\n          >\r\n            {highlightedDate && (\r\n              <div className={classnames('stats', `is-${statistic}`)}>\r\n                <h5 className=\"title\">\r\n                  {t(capitalize(statisticConfig.displayName))}\r\n                </h5>\r\n                <h5>{formatDate(highlightedDate, 'dd MMMM')}</h5>\r\n                <div className=\"stats-bottom\">\r\n                  <h2>\r\n                    {!noRegionHighlightedDistrictData ||\r\n                    !statisticConfig?.hasPrimary\r\n                      ? formatNumber(\r\n                          total,\r\n                          statisticConfig.format !== 'short'\r\n                            ? statisticConfig.format\r\n                            : 'long',\r\n                          statistic\r\n                        )\r\n                      : '-'}\r\n                  </h2>\r\n                  <h6>\r\n                    {!noRegionHighlightedDistrictData ||\r\n                    !statisticConfig?.hasPrimary\r\n                      ? `${delta > 0 ? '+' : ''}${formatNumber(\r\n                          delta,\r\n                          statisticConfig.format !== 'short'\r\n                            ? statisticConfig.format\r\n                            : 'long',\r\n                          statistic\r\n                        )}`\r\n                      : ''}\r\n                  </h6>\r\n                </div>\r\n              </div>\r\n            )}\r\n            <svg\r\n              ref={(element) => {\r\n                refs.current[index] = element;\r\n              }}\r\n              preserveAspectRatio=\"xMidYMid meet\"\r\n            >\r\n              <g className=\"x-axis\" />\r\n              <g className=\"x-axis2\" />\r\n              <g className=\"y-axis\" />\r\n              <g className=\"trend-background\" />\r\n              <g className=\"trend\" />\r\n            </svg>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst isEqual = (prevProps, currProps) => {\r\n  if (!equal(currProps.chartType, prevProps.chartType)) {\r\n    return false;\r\n  } else if (!equal(currProps.isUniform, prevProps.isUniform)) {\r\n    return false;\r\n  } else if (!equal(currProps.isLog, prevProps.isLog)) {\r\n    return false;\r\n  } else if (!equal(currProps.isMovingAverage, prevProps.isMovingAverage)) {\r\n    return false;\r\n  } else if (\r\n    !equal(\r\n      currProps.regionHighlighted.stateCode,\r\n      prevProps.regionHighlighted.stateCode\r\n    )\r\n  ) {\r\n    return false;\r\n  } else if (\r\n    !equal(\r\n      currProps.regionHighlighted.districtName,\r\n      prevProps.regionHighlighted.districtName\r\n    )\r\n  ) {\r\n    return false;\r\n  } else if (\r\n    !equal(\r\n      currProps.noRegionHighlightedDistrictData,\r\n      prevProps.noRegionHighlightedDistrictData\r\n    )\r\n  ) {\r\n    return false;\r\n  } else if (!equal(currProps.endDate, prevProps.endDate)) {\r\n    return false;\r\n  } else if (!equal(currProps.statistics, prevProps.statistics)) {\r\n    return false;\r\n  } else if (!equal(currProps.dates, prevProps.dates)) {\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\nexport default memo(Timeseries, isEqual);\r\n"],"sourceRoot":""}